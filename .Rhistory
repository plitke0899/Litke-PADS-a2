?read.csv
library(tidyverse)
library(janitor)
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623")
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
View(ccrb_comp_raw)
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv") %>%
clean_names() %>%
ccrb_comp_clean <- ccrb_comp_raw %>%
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv") %>%
clean_names() %>%
ccrb_comp_clean <- ccrb_comp_raw %>%
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv") %>%
clean_names() %>%
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv") %>%
clean_names()
?filter
?select()
desc(Borough.Of.Incident.Occurrence)
desc("Borough.Of.Incident.Occurrence)
desc("Borough.Of.Incident.Occurrence")
?summary
summary(Borough.Of.Incident.Occurrence)
summary("Borough.Of.Incident.Occurrence")
?summarize
?mutate
library(lubridate)
View(ccrb_comp_raw)
?filter
?filter()
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy(Incident.Date),
inc_hr = h(Incident.Hour),
rec_date = mdy(CCRB.Received.Date),
close_date = mdy(Close.Date),
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition)) %>%
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy(Incident.Date),
inc_hr = h(Incident.Hour),
rec_date = mdy(CCRB.Received.Date),
close_date = mdy(Close.Date),
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition) %>%
select(inc_date, inc_hr, rec_date, close_date, bor, precint, disp) %>%
filter(inc_date >= as.Date('2023-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
inc_hr = h('Incident.Hour'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, inc_hr, rec_date, close_date, bor, precint, disp) %>%
filter(inc_date >= as.Date('2023-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precint, disp) %>%
filter(inc_date >= as.Date('2023-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy(Incident.Date),
rec_date = mdy(CCRB.Received.Date),
close_date = mdy(Close.Date),
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition) %>%
select(inc_date, rec_date, close_date, bor, precint, disp) %>%
filter(inc_date >= as.Date('2023-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precint, disp) %>%
filter(inc_date >= as.Date('2023-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp) %>%
filter(inc_date >= as.Date('2023-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp) %>%
filter(inc_date >= as.Date('2017-01-01'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp) %>%
filter(inc_date >= as.Date('01-01-2017'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp) %>%
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp) %>%
#filter(inc_date >= as.Date('01-01-2017'))
library(tidyverse)
library(tidyverse)
library(janitor)
library(lubridate)
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp) %>%
#filter(inc_date >= as.Date('01-01-2017'))
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy('Incident.Date'),
rec_date = mdy('CCRB.Received.Date'),
close_date = mdy('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
dplyr::last_dplyr_warnings()
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = as.Date('Incident.Date'),
rec_date = as.Date('CCRB.Received.Date'),
close_date = as.Date('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
View(ccrb_comp_raw)
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = mdy_hms('Incident.Date'),
rec_date = mdy_hms('CCRB.Received.Date'),
close_date = mdy_hms('Close.Date'),
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
View(ccrb_comp_clean)
View(ccrb_comp_clean)
?as.Date()
library(tidyverse)
library(janitor)
library(lubridate)
ccrb_comp_raw <- read.csv("
Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
library(tidyverse)
library(janitor)
library(lubridate)
ccrb_comp_raw <- read.csv("
Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
library(tidyverse)
library(janitor)
library(lubridate)
ccrb_comp_raw <- read.csv("
Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
library(tidyverse)
library(janitor)
library(lubridate)
ccrb_comp_raw <- read.csv("
Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
ccrb_comp_raw <- read.csv("
Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
ccrb_comp_clean <- ccrb_comp_raw %>%
clean_names() %>%
mutate(inc_date = as.Date('Incident.Date', %y-%m-%d),
ccrb_comp_clean <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = as.Date('Incident.Date', %y-%m-%d),
View(ccrb_comp_raw)
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = 'Incident.Date',
rec_date = 'CCRB.Received.Date',
close_date = 'Close.Date',
bor = 'Borough.Of.Incident.Occurrence',
precinct = 'Precinct.Of.Incident.Occurrence',
disp = 'CCRB.Complaint.Disposition') %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
View(ccrb_comp_raw)
View(ccrb_comp_cleanv1)
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition) %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
View(ccrb_comp_cleanv1)
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition) %>%
select(inc_date, rec_date, close_date, bor, precinct, disp, na.rm = TRUE)
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition) %>%
select(inc_date, rec_date, close_date, bor, precinct, disp)
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ydm(inc_date))
View(ccrb_comp_cleanv2)
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ydm(inc_date),
rec_dt = mdy_hms(rec_date))
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ydm(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date))
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date))
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
bor = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition,
comp_id = Complaint.Id) %>%
select(comp_id, inc_date, rec_date, close_date, bor, precinct, disp)
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date))
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
boro = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition,
comp_id = Complaint.Id) %>%
select(comp_id, inc_date, rec_date, close_date, boro, precinct, disp)
#Mostly renamings here; keeping comp_id and precinct/boro identifi
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date) #843 ,
rec_dt = mdy_hms(rec_date),
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
boro = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition,
comp_id = Complaint.Id) %>%
select(comp_id, inc_date, rec_date, close_date, boro, precinct, disp)
#Mostly renamings here; keeping comp_id and precinct/boro identifi
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date))
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date)) %>%
filter(!is.na(inc_dt))
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date)) %>%
filter(!is.na(inc_dt),
rec_dt >= 2017)
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date))
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt >= 2017-01-01 00:00:00)
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt >= as.Date('2017-01-01 00:00:00')
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt >= as_datetime('2017-01-01 00:00:00')
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt > as.Date('2017-01-01'))
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt > as.Date('2017-01-01')) %>%
group_by(precinct) %>%
summarize(comp_count = count(comp_id))
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt > as.Date('2017-01-01')) %>%
group_by(precinct) %>%
summarize(comp_count = n(comp_id))
?count
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt > as.Date('2017-01-01')) %>%
group_by(precinct) %>%
summarize(comp_count = count())
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct) %>%
summarize(comp_count = n(comp_id))
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct) %>%
summarize(comp_count = n())
View(ccrb_comp_explo)
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct) %>%
summarize(comp_count = n(), na.rm = TRUE)
View(ccrb_comp_explo)
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct, na.rm = TRUE) %>%
summarize(comp_count = n())
library(tidyverse)
library(janitor)
library(lubridate)
ccrb_comp_raw <- read.csv("Civilian_Complaint_Review_Board__Complaints_Against_Police_Officers_20240623.csv")
ccrb_comp_cleanv1 <- ccrb_comp_raw %>%
#clean_names() %>%
mutate(inc_date = Incident.Date,
rec_date = CCRB.Received.Date,
close_date = Close.Date,
boro = Borough.Of.Incident.Occurrence,
precinct = Precinct.Of.Incident.Occurrence,
disp = CCRB.Complaint.Disposition,
comp_id = Complaint.Id) %>%
select(comp_id, inc_date, rec_date, close_date, boro, precinct, disp)
#Mostly renamings here; keeping comp_id and precinct/boro identifiers so
#I can join them to other sets later
ccrb_comp_cleanv2 <- ccrb_comp_cleanv1 %>%
mutate(inc_dt = ymd(inc_date),
rec_dt = mdy_hms(rec_date),
close_dt = mdy_hms(close_date))
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt > as.Date('2017-01-01'), !is.na(precinct))
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct, na.rm = TRUE) %>%
summarize(comp_count = n())
#Date conversions. 843 incident dates fail to parse for some reason;
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct, na.rm = TRUE) %>%
summarize(comp_count = n())
View(ccrb_comp_explo)
ccrb_comp_cleanv3 <- ccrb_comp_cleanv2 %>%
filter(rec_dt > as.Date('2017-01-01'), !is.na(precinct))
ccrb_comp_explo <- ccrb_comp_cleanv3 %>%
group_by(precinct) %>%
summarize(comp_count = n())
View(ccrb_comp_explo)
write.csv(ccrb_comp_explo, 'litkePADSa2R.csv')
